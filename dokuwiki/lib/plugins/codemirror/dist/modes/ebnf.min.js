(function(a){if(typeof exports=="object"&&typeof module=="object")a(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)define(["../../lib/codemirror"],a);else a(CodeMirror)})(function(a){"use strict";a.defineMode("ebnf",function(b){var c={slash:0,parenthesis:1};var d={comment:0,_string:1,characterClass:2};var e=null;if(b.bracesMode)e=a.getMode(b,b.bracesMode);return{startState:function(){return{stringType:null,commentType:null,braced:0,lhs:true,localState:null,stack:[],inDefinition:false}},token:function(a,b){if(!a)return;if(b.stack.length===0){if(a.peek()=='"'||a.peek()=="'"){b.stringType=a.peek();a.next();b.stack.unshift(d._string)}else if(a.match(/^\/\*/)){b.stack.unshift(d.comment);b.commentType=c.slash}else if(a.match(/^\(\*/)){b.stack.unshift(d.comment);b.commentType=c.parenthesis}}switch(b.stack[0]){case d._string:while(b.stack[0]===d._string&&!a.eol()){if(a.peek()===b.stringType){a.next();b.stack.shift()}else if(a.peek()==="\\"){a.next();a.next()}else{a.match(/^.[^\\\"\']*/)}}return b.lhs?"property string":"string";case d.comment:while(b.stack[0]===d.comment&&!a.eol()){if(b.commentType===c.slash&&a.match(/\*\//)){b.stack.shift();b.commentType=null}else if(b.commentType===c.parenthesis&&a.match(/\*\)/)){b.stack.shift();b.commentType=null}else{a.match(/^.[^\*]*/)}}return"comment";case d.characterClass:while(b.stack[0]===d.characterClass&&!a.eol()){if(!(a.match(/^[^\]\\]+/)||a.match(/^\\./))){b.stack.shift()}}return"operator"}var f=a.peek();if(e!==null&&(b.braced||f==="{")){if(b.localState===null)b.localState=e.startState();var g=e.token(a,b.localState),h=a.current();if(!g){for(var i=0;i<h.length;i++){if(h[i]==="{"){if(b.braced===0){g="matchingbracket"}b.braced++}else if(h[i]==="}"){b.braced--;if(b.braced===0){g="matchingbracket"}}}}return g}switch(f){case"[":a.next();b.stack.unshift(d.characterClass);return"bracket";case":":case"|":case";":a.next();return"operator";case"%":if(a.match("%%")){return"header"}else if(a.match(/[%][A-Za-z]+/)){return"keyword"}else if(a.match(/[%][}]/)){return"matchingbracket"}break;case"/":if(a.match(/[\/][A-Za-z]+/)){return"keyword"}case"\\":if(a.match(/[\][a-z]+/)){return"string-2"}case".":if(a.match(".")){return"atom"}case"*":case"-":case"+":case"^":if(a.match(f)){return"atom"}case"$":if(a.match("$$")){return"builtin"}else if(a.match(/[$][0-9]+/)){return"variable-3"}case"<":if(a.match(/<<[a-zA-Z_]+>>/)){return"builtin"}}if(a.match(/^\/\//)){a.skipToEnd();return"comment"}else if(a.match(/return/)){return"operator"}else if(a.match(/^[a-zA-Z_][a-zA-Z0-9_]*/)){if(a.match(/(?=[\(.])/)){return"variable"}else if(a.match(/(?=[\s\n]*[:=])/)){return"def"}return"variable-2"}else if(["[","]","(",")"].indexOf(a.peek())!=-1){a.next();return"bracket"}else if(!a.eatSpace()){a.next()}return null}}});a.defineMIME("text/x-ebnf","ebnf")});
//# sourceMappingURL=ebnf.min.js.map