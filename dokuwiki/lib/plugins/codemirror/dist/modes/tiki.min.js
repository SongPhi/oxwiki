(function(a){if(typeof exports=="object"&&typeof module=="object")a(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)define(["../../lib/codemirror"],a);else a(CodeMirror)})(function(a){"use strict";a.defineMode("tiki",function(a){function b(a,b,c){return function(e,f){while(!e.eol()){if(e.match(b)){f.tokenize=d;break}e.next()}if(c)f.tokenize=c;return a}}function c(a){return function(b,c){while(!b.eol()){b.next()}c.tokenize=d;return a}}function d(a,e){function f(b){e.tokenize=b;return b(a,e)}var g=a.sol();var i=a.next();switch(i){case"{":a.eat("/");a.eatSpace();a.eatWhile(/[^\s\u00a0=\"\'\/?(}]/);e.tokenize=h;return"tag";case"_":if(a.eat("_"))return f(b("strong","__",d));break;case"'":if(a.eat("'"))return f(b("em","''",d));break;case"(":if(a.eat("("))return f(b("variable-2","))",d));break;case"[":return f(b("variable-3","]",d));break;case"|":if(a.eat("|"))return f(b("comment","||"));break;case"-":if(a.eat("=")){return f(b("header string","=-",d))}else if(a.eat("-")){return f(b("error tw-deleted","--",d))}break;case"=":if(a.match("=="))return f(b("tw-underline","===",d));break;case":":if(a.eat(":"))return f(b("comment","::"));break;case"^":return f(b("tw-box","^"));break;case"~":if(a.match("np~"))return f(b("meta","~/np~"));break}if(g){switch(i){case"!":if(a.match("!!!!!")){return f(c("header string"))}else if(a.match("!!!!")){return f(c("header string"))}else if(a.match("!!!")){return f(c("header string"))}else if(a.match("!!")){return f(c("header string"))}else{return f(c("header string"))}break;case"*":case"#":case"+":return f(c("tw-listitem bracket"));break}}return null}var e=a.indentUnit;var f,g;function h(a,b){var c=a.next();var e=a.peek();if(c=="}"){b.tokenize=d;return"tag"}else if(c=="("||c==")"){return"bracket"}else if(c=="="){g="equals";if(e==">"){c=a.next();e=a.peek()}if(!/[\'\"]/.test(e)){b.tokenize=j()}return"operator"}else if(/[\'\"]/.test(c)){b.tokenize=i(c);return b.tokenize(a,b)}else{a.eatWhile(/[^\s\u00a0=\"\'\/?]/);return"keyword"}}function i(a){return function(b,c){while(!b.eol()){if(b.next()==a){c.tokenize=h;break}}return"string"}}function j(){return function(a,b){while(!a.eol()){var c=a.next();var d=a.peek();if(c==" "||c==","||/[ )}]/.test(d)){b.tokenize=h;break}}return"string"}}var k,l;function m(){for(var a=arguments.length-1;a>=0;a--)k.cc.push(arguments[a])}function n(){m.apply(null,arguments);return true}function o(a,b){var c=k.context&&k.context.noIndent;k.context={prev:k.context,pluginName:a,indent:k.indented,startOfLine:b,noIndent:c}}function p(){if(k.context)k.context=k.context.prev}function q(a){if(a=="openPlugin"){k.pluginName=f;return n(t,r(k.startOfLine))}else if(a=="closePlugin"){var b=false;if(k.context){b=k.context.pluginName!=f;p()}else{b=true}if(b)l="error";return n(s(b))}else if(a=="string"){if(!k.context||k.context.name!="!cdata")o("!cdata");if(k.tokenize==d)p();return n()}else return n()}function r(a){return function(b){if(b=="selfclosePlugin"||b=="endPlugin")return n();if(b=="endPlugin"){o(k.pluginName,a);return n()}return n()}}function s(a){return function(b){if(a)l="error";if(b=="endPlugin")return n();return m()}}function t(a){if(a=="keyword"){l="attribute";return n(t)}if(a=="equals")return n(u,t);return m()}function u(a){if(a=="keyword"){l="string";return n()}if(a=="string")return n(v);return m()}function v(a){if(a=="string")return n(v);else return m()}return{startState:function(){return{tokenize:d,cc:[],indented:0,startOfLine:true,pluginName:null,context:null}},token:function(a,b){if(a.sol()){b.startOfLine=true;b.indented=a.indentation()}if(a.eatSpace())return null;l=g=f=null;var c=b.tokenize(a,b);if((c||g)&&c!="comment"){k=b;while(true){var d=b.cc.pop()||q;if(d(g||c))break}}b.startOfLine=false;return l||c},indent:function(a,b){var c=a.context;if(c&&c.noIndent)return 0;if(c&&/^{\//.test(b))c=c.prev;while(c&&!c.startOfLine)c=c.prev;if(c)return c.indent+e;else return 0},electricChars:"/"}});a.defineMIME("text/tiki","tiki")});
//# sourceMappingURL=tiki.min.js.map