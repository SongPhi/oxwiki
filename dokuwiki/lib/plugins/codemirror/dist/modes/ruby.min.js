(function(a){if(typeof exports=="object"&&typeof module=="object")a(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)define(["../../lib/codemirror"],a);else a(CodeMirror)})(function(a){"use strict";a.defineMode("ruby",function(a){function b(a){var b={};for(var c=0,d=a.length;c<d;++c)b[a[c]]=true;return b}var c=b(["alias","and","BEGIN","begin","break","case","class","def","defined?","do","else","elsif","END","end","ensure","false","for","if","in","module","next","not","or","redo","rescue","retry","return","self","super","then","true","undef","unless","until","when","while","yield","nil","raise","throw","catch","fail","loop","callcc","caller","lambda","proc","public","protected","private","require","load","require_relative","extend","autoload","__END__","__FILE__","__LINE__","__dir__"]);var d=b(["def","class","case","for","while","module","then","catch","loop","proc","begin"]);var e=b(["end","until"]);var f={"[":"]","{":"}","(":")"};var g;function h(a,b,c){c.tokenize.push(a);return a(b,c)}function i(a,b){if(a.sol()&&a.match("=begin")&&a.eol()){b.tokenize.push(n);return"comment"}if(a.eatSpace())return null;var c=a.next(),d;if(c=="`"||c=="'"||c=='"'){return h(l(c,"string",c=='"'||c=="`"),a,b)}else if(c=="/"){var e=a.current().length;if(a.skipTo("/")){var i=a.current().length;a.backUp(a.current().length-e);var j=0;while(a.current().length<i){var k=a.next();if(k=="(")j+=1;else if(k==")")j-=1;if(j<0)break}a.backUp(a.current().length-e);if(j==0)return h(l(c,"string-2",true),a,b)}return"operator"}else if(c=="%"){var o="string",p=true;if(a.eat("s"))o="atom";else if(a.eat(/[WQ]/))o="string";else if(a.eat(/[r]/))o="string-2";else if(a.eat(/[wxq]/)){o="string";p=false}var q=a.eat(/[^\w\s=]/);if(!q)return"operator";if(f.propertyIsEnumerable(q))q=f[q];return h(l(q,o,p,true),a,b)}else if(c=="#"){a.skipToEnd();return"comment"}else if(c=="<"&&(d=a.match(/^<-?[\`\"\']?([a-zA-Z_?]\w*)[\`\"\']?(?:;|$)/))){return h(m(d[1]),a,b)}else if(c=="0"){if(a.eat("x"))a.eatWhile(/[\da-fA-F]/);else if(a.eat("b"))a.eatWhile(/[01]/);else a.eatWhile(/[0-7]/);return"number"}else if(/\d/.test(c)){a.match(/^[\d_]*(?:\.[\d_]+)?(?:[eE][+\-]?[\d_]+)?/);return"number"}else if(c=="?"){while(a.match(/^\\[CM]-/)){}if(a.eat("\\"))a.eatWhile(/\w/);else a.next();return"string"}else if(c==":"){if(a.eat("'"))return h(l("'","atom",false),a,b);if(a.eat('"'))return h(l('"',"atom",true),a,b);if(a.eat(/[\<\>]/)){a.eat(/[\<\>]/);return"atom"}if(a.eat(/[\+\-\*\/\&\|\:\!]/)){return"atom"}if(a.eat(/[a-zA-Z$@_\xa1-\uffff]/)){a.eatWhile(/[\w$\xa1-\uffff]/);a.eat(/[\?\!\=]/);return"atom"}return"operator"}else if(c=="@"&&a.match(/^@?[a-zA-Z_\xa1-\uffff]/)){a.eat("@");a.eatWhile(/[\w\xa1-\uffff]/);return"variable-2"}else if(c=="$"){if(a.eat(/[a-zA-Z_]/)){a.eatWhile(/[\w]/)}else if(a.eat(/\d/)){a.eat(/\d/)}else{a.next()}return"variable-3"}else if(/[a-zA-Z_\xa1-\uffff]/.test(c)){a.eatWhile(/[\w\xa1-\uffff]/);a.eat(/[\?\!]/);if(a.eat(":"))return"atom";return"ident"}else if(c=="|"&&(b.varList||b.lastTok=="{"||b.lastTok=="do")){g="|";return null}else if(/[\(\)\[\]{}\\;]/.test(c)){g=c;return null}else if(c=="-"&&a.eat(">")){return"arrow"}else if(/[=+\-\/*:\.^%<>~|]/.test(c)){var r=a.eatWhile(/[=+\-\/*:\.^%<>~|]/);if(c=="."&&!r)g=".";return"operator"}else{return null}}function j(a){if(!a)a=1;return function(b,c){if(b.peek()=="}"){if(a==1){c.tokenize.pop();return c.tokenize[c.tokenize.length-1](b,c)}else{c.tokenize[c.tokenize.length-1]=j(a-1)}}else if(b.peek()=="{"){c.tokenize[c.tokenize.length-1]=j(a+1)}return i(b,c)}}function k(){var a=false;return function(b,c){if(a){c.tokenize.pop();return c.tokenize[c.tokenize.length-1](b,c)}a=true;return i(b,c)}}function l(a,b,c,d){return function(e,f){var g=false,h;if(f.context.type==="read-quoted-paused"){f.context=f.context.prev;e.eat("}")}while((h=e.next())!=null){if(h==a&&(d||!g)){f.tokenize.pop();break}if(c&&h=="#"&&!g){if(e.eat("{")){if(a=="}"){f.context={prev:f.context,type:"read-quoted-paused"}}f.tokenize.push(j());break}else if(/[@\$]/.test(e.peek())){f.tokenize.push(k());break}}g=!g&&h=="\\"}return b}}function m(a){return function(b,c){if(b.match(a))c.tokenize.pop();else b.skipToEnd();return"string"}}function n(a,b){if(a.sol()&&a.match("=end")&&a.eol())b.tokenize.pop();a.skipToEnd();return"comment"}return{startState:function(){return{tokenize:[i],indented:0,context:{type:"top",indented:-a.indentUnit},continuedLine:false,lastTok:null,varList:false}},token:function(a,b){g=null;if(a.sol())b.indented=a.indentation();var f=b.tokenize[b.tokenize.length-1](a,b),h;var i=g;if(f=="ident"){var j=a.current();f=b.lastTok=="."?"property":c.propertyIsEnumerable(a.current())?"keyword":/^[A-Z]/.test(j)?"tag":b.lastTok=="def"||b.lastTok=="class"||b.varList?"def":"variable";if(f=="keyword"){i=j;if(d.propertyIsEnumerable(j))h="indent";else if(e.propertyIsEnumerable(j))h="dedent";else if((j=="if"||j=="unless")&&a.column()==a.indentation())h="indent";else if(j=="do"&&b.context.indented<b.indented)h="indent"}}if(g||f&&f!="comment")b.lastTok=i;if(g=="|")b.varList=!b.varList;if(h=="indent"||/[\(\[\{]/.test(g))b.context={prev:b.context,type:g||f,indented:b.indented};else if((h=="dedent"||/[\)\]\}]/.test(g))&&b.context.prev)b.context=b.context.prev;if(a.eol())b.continuedLine=g=="\\"||f=="operator";return f},indent:function(b,c){if(b.tokenize[b.tokenize.length-1]!=i)return 0;var d=c&&c.charAt(0);var e=b.context;var g=e.type==f[d]||e.type=="keyword"&&/^(?:end|until|else|elsif|when|rescue)\b/.test(c);return e.indented+(g?0:a.indentUnit)+(b.continuedLine?a.indentUnit:0)},electricChars:"}de",lineComment:"#"}});a.defineMIME("text/x-ruby","ruby")});
//# sourceMappingURL=ruby.min.js.map