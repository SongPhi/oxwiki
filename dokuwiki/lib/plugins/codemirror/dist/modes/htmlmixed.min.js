(function(a){if(typeof exports=="object"&&typeof module=="object")a(require("../../lib/codemirror"),require("../xml/xml"),require("../javascript/javascript"),require("../css/css"));else if(typeof define=="function"&&define.amd)define(["../../lib/codemirror","../xml/xml","../javascript/javascript","../css/css"],a);else a(CodeMirror)})(function(a){"use strict";a.defineMode("htmlmixed",function(b,c){var d=a.getMode(b,{name:"xml",htmlMode:true,multilineTagIndentFactor:c.multilineTagIndentFactor,multilineTagIndentPastTag:c.multilineTagIndentPastTag});var e=a.getMode(b,"css");var f=[],g=c&&c.scriptTypes;f.push({matches:/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^$/i,mode:a.getMode(b,"javascript")});if(g)for(var h=0;h<g.length;++h){var i=g[h];f.push({matches:i.matches,mode:i.mode&&a.getMode(b,i.mode)})}f.push({matches:/./,mode:a.getMode(b,"text/plain")});function j(a,b){var c=b.htmlState.tagName;if(c)c=c.toLowerCase();var g=d.token(a,b.htmlState);if(c=="script"&&/\btag\b/.test(g)&&a.current()==">"){var h=a.string.slice(Math.max(0,a.pos-100),a.pos).match(/\btype\s*=\s*("[^"]+"|'[^']+'|\S+)[^<]*$/i);h=h?h[1]:"";if(h&&/[\"\']/.test(h.charAt(0)))h=h.slice(1,h.length-1);for(var i=0;i<f.length;++i){var j=f[i];if(typeof j.matches=="string"?h==j.matches:j.matches.test(h)){if(j.mode){b.token=l;b.localMode=j.mode;b.localState=j.mode.startState&&j.mode.startState(d.indent(b.htmlState,""))}break}}}else if(c=="style"&&/\btag\b/.test(g)&&a.current()==">"){b.token=m;b.localMode=e;b.localState=e.startState(d.indent(b.htmlState,""))}return g}function k(a,b,c){var d=a.current();var e=d.search(b);if(e>-1)a.backUp(d.length-e);else if(d.match(/<\/?$/)){a.backUp(d.length);if(!a.match(b,false))a.match(d)}return c}function l(a,b){if(a.match(/^<\/\s*script\s*>/i,false)){b.token=j;b.localState=b.localMode=null;return null}return k(a,/<\/\s*script\s*>/,b.localMode.token(a,b.localState))}function m(a,b){if(a.match(/^<\/\s*style\s*>/i,false)){b.token=j;b.localState=b.localMode=null;return null}return k(a,/<\/\s*style\s*>/,e.token(a,b.localState))}return{startState:function(){var a=d.startState();return{token:j,localMode:null,localState:null,htmlState:a}},copyState:function(b){if(b.localState)var c=a.copyState(b.localMode,b.localState);return{token:b.token,localMode:b.localMode,localState:c,htmlState:a.copyState(d,b.htmlState)}},token:function(a,b){return b.token(a,b)},indent:function(b,c){if(!b.localMode||/^\s*<\//.test(c))return d.indent(b.htmlState,c);else if(b.localMode.indent)return b.localMode.indent(b.localState,c);else return a.Pass},innerMode:function(a){return{state:a.localState||a.htmlState,mode:a.localMode||d}}}},"xml","javascript","css");a.defineMIME("text/html","htmlmixed")});
//# sourceMappingURL=htmlmixed.min.js.map